
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Accueil</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <img src="images/lycee.jpg" alt="LycÃ©e de l'HyrÃ´me" class="header" style="max-width: 100%; height: auto;">
  <h1>Bienvenue au Rallye HyrÃ´me 2025 1STI2D / TSTI2D</h1>
  <p>DÃ©couverte de la ville de ChemillÃ© aujourdâ€™hui et autrefois.</p>
  <div class="container">
    <p>Entrez le code de votre groupe :</p>
    <input type="text" id="codeInput" placeholder="Ex : 1111">
    <button onclick="verifyCode()">Entrer</button>
     <p id="error" style="color:red; display:none;">Code incorrect. Essayez encore.</p>
  </div>

  <div class="instructions" style="border: 2px solid #3366cc; padding: 20px; margin-top: 30px; display: inline-block; text-align: center;">
  <h2>Chers collÃ¨gues,</h2>
  <p>
    Ceci est une version test du rallye.<br>
    Ap: Toutes les infos pour les groupes 1, 2 et 3? sont en ligne, vous pouvez commencer Ã  tester.
    Veuillez choisir le thÃ¨me que vous souhaitez tester et entrer le code correspondant :
  </p>
  <ul style="list-style: none; padding-left: 0; text-align: left;">
    <li>ğŸš² <strong>Transport et mobilitÃ©</strong> â€” code : <code>1111</code></li>
    <li>ğŸ­ <strong>Usines et entreprises</strong> â€” code : <code>2222</code></li>
    <li>ğŸ§­ <strong>Tourisme</strong> â€” code : <code>3333</code></li>
    <li>ğŸ• <strong>Histoire et patrimoine religieux â€“ Ã‰quipe 1</strong> â€” code : <code>4444</code></li>
    <li>â›ª <strong>Histoire et patrimoine religieux â€“ Ã‰quipe 2</strong> â€” code : <code>5555</code></li>
  </ul>
</div>

 <script>
const mapping = {
  "1111": "groupe1.html",
  "2222": "groupe2.html",
  "3333": "groupe3.html",
  "4444": "groupe4.html",
  "5555": "groupe5.html",
};

function verifyCode() {
  const code = document.getElementById("codeInput").value.trim();
  const error = document.getElementById("error");

  // ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ, ĞµÑĞ»Ğ¸ ĞºĞ¾Ğ´ Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹
  if (!mapping[code]) {
    error.style.display = "block";
    return;
  }

  // Ğ¡ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ ĞµÑĞ»Ğ¸ ĞºĞ¾Ğ´ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹
  error.style.display = "none";

  // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Google Sheets
  const horodatage = new Date().toLocaleString("fr-FR");
  const data = {
    horodatage,
    groupe: code,
    etape: "Accueil",
    action: "Code entrÃ©",
    donnee: code,
    ip: ""
  };

  envoyerVersGoogleSheet(data);

  // ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ¿Ğ¾ Ğ°Ğ´Ñ€ĞµÑÑƒ
  window.location.href = mapping[code];
}

function envoyerVersGoogleSheet(data) {
  fetch('https://script.google.com/macros/s/AKfycbx5XMGxrHLzy9C-aDZpgrs4holdOq0gM-4HEPkpi_5pHHgjZ3Ac7Pp0U1O8tbEMjLc6/exec', {
    method: 'POST',
    body: JSON.stringify(data),
    headers: {
      'Content-Type': 'application/json'
    }
  })
  .then(res => res.text())
  .then(rep => console.log('RÃ©ponse Google Sheets:', rep))
  .catch(err => console.error('Erreur:', err));
}
</script>


  
</body>
</html>
